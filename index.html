<!DOCTYPE html>
<html>
<head>
  <title>Exercise Logger</title>
  <style>
    body { font-family: Arial; margin: 20px; font-size: 3em; }
    .step { margin-bottom: 40px; }
    .button-group { margin-top: 20px; }
    .button-group button {
      display: inline-block;
      margin: 10px;
      padding: 30px 50px;
      font-size: 1em;
      cursor: pointer;
    }
    .save-button {
      font-size: 1em;
      padding: 30px 50px;
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <h1>Exercise Logger</h1>
  <div id="stepContainer" class="step"></div>

  <script>
    let log = {};
    const stepContainer = document.getElementById("stepContainer");

    function renderStep(content) {
      stepContainer.innerHTML = "";
      stepContainer.appendChild(content);
    }

    function createButton(text, onClick) {
      const btn = document.createElement("button");
      btn.textContent = text;
      btn.onclick = onClick;
      return btn;
    }

    function createButtonGroup(items, onClick) {
      const group = document.createElement("div");
      group.className = "button-group";
      items.forEach(item => {
        const btn = createButton(item, () => onClick(item));
        group.appendChild(btn);
      });
      return group;
    }

    function start() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>1. What did you achieve?</strong><br><br>";
      const options = ["Swim", "Heavy Lift", "Leg"];
      div.appendChild(createButtonGroup(options, choice => {
        log.activity = choice;
        if (choice === "Swim") stepSwimReps();
        else if (choice === "Heavy Lift") stepLiftPart();
        else stepLegType();
      }));
      renderStep(div);
    }

    function stepSwimReps() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>2. How many times? (Swim)</strong><br><br>";
      div.appendChild(createButtonGroup([...Array(12)].map((_, i) => i + 1), i => {
        log.reps = i;
        log.summary = `${i}x 30M`;
        showResult();
      }));
      renderStep(div);
    }

    function stepLiftPart() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>2. Which part? (Heavy Lift)</strong><br><br>";
      const options = ["Chest", "Back", "Abdominal"];
      div.appendChild(createButtonGroup(options, part => {
        log.part = part;
        if (part === "Chest") stepChestSub();
        else if (part === "Back") stepBackWeight();
        else stepAbSub();
      }));
      renderStep(div);
    }

    function stepChestSub() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>Chest - Which area?</strong><br><br>";
      div.appendChild(createButtonGroup(["Upper Chest", "Middle Chest"], area => {
        log.subPart = area;
        if (area === "Upper Chest") stepEvenWeightOnly();
        else stepMiddleChestWeight();
      }));
      renderStep(div);
    }

    function stepMiddleChestWeight() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>3. Select weight (Middle Chest)</strong><br><br>";
      const weights = [
        1.1, 3.4, 5.7, 7.9, 10.2, 12.5, 14.7,
        17.0, 19.3, 21.6, 23.8, 26.1, 28.4, 30.6, 32.9
      ];
      const labels = weights.map(w => `${w}×2`);
      div.appendChild(createButtonGroup(labels, label => {
        log.weight = label;
        stepLiftReps();
      }));
      renderStep(div);
    }

    function stepBackWeight() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>3. Select weight (Back)</strong><br><br>";
      const weights = [7, 14, 21, 28, 33, 42, 49, 56, 63, 70, 77, 84, 91];
      div.appendChild(createButtonGroup(weights, weight => {
        log.weight = weight;
        stepLiftReps();
      }));
      renderStep(div);
    }

    function stepAbSub() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>Abdominal - Which movement?</strong><br><br>";
      div.appendChild(createButtonGroup(["Plank", "Curling"], move => {
        log.subPart = move;
        stepLiftReps();
      }));
      renderStep(div);
    }

    function stepEvenWeightOnly() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>3. Select weight (2–30kg, even only)</strong><br><br>";
      const weights = [];
      for (let i = 2; i <= 30; i += 2) {
        weights.push(i);
      }
      div.appendChild(createButtonGroup(weights, weight => {
        log.weight = weight;
        stepLiftReps();
      }));
      renderStep(div);
    }

    function stepLiftReps() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>4. Select reps</strong><br><br>";
      div.appendChild(createButtonGroup([...Array(12)].map((_, i) => i + 1), reps => {
        log.reps = reps;
        const part = log.subPart ? `${log.part} - ${log.subPart}` : log.part;
        log.summary = log.part === "Abdominal"
          ? `${part}, ${log.reps}x`
          : `${part}, ${log.weight}kg × ${log.reps}`;
        showResult();
      }));
      renderStep(div);
    }

    function stepLegType() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>2. What type of leg activity?</strong><br><br>";
      div.appendChild(createButtonGroup(["Stretch", "Exercise"], type => {
        if (type === "Stretch") {
          log.summary = "Leg - Stretch";
          showResult();
        } else {
          log.part = "Leg - Exercise";
          stepLegPart();
        }
      }));
      renderStep(div);
    }

    function stepLegPart() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>3. Which part?</strong><br><br>";
      div.appendChild(createButtonGroup(["Gluteus", "Quadriceps"], part => {
        log.subPart = part;
        stepLegEvenWeight();
      }));
      renderStep(div);
    }

    function stepLegEvenWeight() {
      const div = document.createElement("div");
      div.innerHTML = "<strong>4. Select weight (2–30kg)</strong><br><br>";
      const weights = [];
      for (let i = 2; i <= 30; i += 2) {
        weights.push(i);
      }
      div.appendChild(createButtonGroup(weights, weight => {
        log.weight = weight;
        log.summary = `${log.part} - ${log.subPart}, ${log.weight}kg`;
        showResult();
      }));
      renderStep(div);
    }

    function showResult() {
      const div = document.createElement("div");
      div.innerHTML = `<strong>Result:</strong><br><br>${log.summary}<br><br>`;
      const saveBtn = document.createElement("button");
      saveBtn.textContent = "儲存到 iPhone Notes";
      saveBtn.className = "save-button";
      saveBtn.onclick = saveToNotes;
      div.appendChild(saveBtn);
      renderStep(div);
    }

    function saveToNotes() {
      const encoded = encodeURIComponent(log.summary);
      const shortcutURL = `shortcuts://run-shortcut?name=SaveToNotes&input=${encoded}`;
      window.location.href = shortcutURL;
    }

    start();
  </script>

</body>
</html>